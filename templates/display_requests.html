<!DOCTYPE html>
<html>
<head>
	<title>Script Requests</title>
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
	<style>
        #navbar {
           position: fixed;
           top: 0;
           left: 0;
           width: 200px;
           height: 100%;
           border-radius: 2px;
           box-shadow:  4px 4px 8px #f5be70,
                  -10px -10px 15px #f5be70;
           background-color: orange;
           padding: 20px;
        }
    
        #logo {
           height: 100px;
           width: 100px;
           margin: 0;
        }
    
        .container {
          margin-left: 220px; /* add margin to the left to leave space for the navbar */
          margin-right: 10px; /* add margin to the right */
        }
    
        /* add style for the navbar items */
        #navbar-items {
           margin-top: 20px;
           display: flex;
           flex-direction: column;
           align-items: center;
        }
    
        #navbar-items a {
           color: white;
           font-size: 20px;
           font-weight: bold;
           text-decoration: none;
           margin-top: 20px;
        }
    
        #navbar-items a:hover {
           color: black;
        }
    
        /* add style for the Google ID picture */
        #google-id-picture {
           display: block;
           margin: 20px auto 0; /* center horizontally and add margin to the top */
           width: 50px;
           height: 50px;
        }
    
        /* add style for the logout button */
        #logout-btn {
            /* width: 100%; */
            margin-top: auto; /* push the button to the bottom of the container */
        }
    
        #redirect-link {
            text-decoration: none;
            font-size: small;
            font-family: 'Times New Roman', Times, serif;
            color: black;
        }
    
        /* .fullscreen-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-image: url('https://example.com/background.jpg');
            background-size: cover;
            background-position: center;
        }
    
        .container {
            max-width: 800px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
            text-align: center;
        }
    
        h1 {
            font-size: 4rem;
            font-weight: bold;
            margin-bottom: 2rem;
        }
    
        p {
            font-size: 1.5rem;
            line-height: 2rem;
            margin-bottom: 1.5rem;
        } */
     </style>
    </head>
    <body>
     <div id="navbar">
        <div class="container-fluid">
           <div class="row justify-content-center align-items-center">
              <img src="../static/TicTag-Logo.png" alt="Tictag-Logo" id="logo">
              <p1>Tictag Scripts</p1>
           </div>
           <!-- add navbar items -->
           <div id="navbar-items">
              <img src="{{ picture }}" alt="Google ID Picture" id="google-id-picture">
    
              <button type="button" id="check-scripts-btn" class="btn btn-light mt-3">Check all scripts</button>
              <button type="button" id="request-scripts-btn" class="btn btn-light mt-3">Request for a script</button>
              <button type="button" id="check-requests-btn" class="btn btn-light mt-3">Check all existing requests</button>
              <button type="button" id="homepage-btn" class="btn btn-light mt-3">Homepage</button>
              <button type="button" id="logout-btn" class="btn btn-light mt-3">Logout</button>
    
           </div>
        </div>
      </div>
    
      <!-- class="btn btn-light mt-3" -->
        <script>
    
            document.getElementById("logout-btn").addEventListener("click", function() {
                window.location.href = "/logout";
            });
            document.getElementById("check-scripts-btn").addEventListener("click", function() {
                window.location.href = "/display_all_scripts";
            });
            document.getElementById("request-scripts-btn").addEventListener("click", function() {
                window.location.href = "/request_for_a_script";
            });
            document.getElementById("check-requests-btn").addEventListener("click", function() {
                window.location.href = "/display_all_requests";
            });
            document.getElementById("homepage-btn").addEventListener("click", function() {
                window.location.href = "/homepage";
            });
        </script>
	<div class="container">
		<h1 class="mt-4">All Script Requests</h1>
		<table class="table">
			<thead>
				<tr>
					<th>ID</th>
					<th>Employee ID</th>
					<th>Project</th>
					<th>Request Description</th>
					<th>Impact</th>
					<th>Urgency</th>
					<th>Created At</th>
				</tr>
			</thead>
			<tbody id="requests-table-body">
			</tbody>
		</table>
	</div>
	<script>
		axios.get('http://127.0.0.1:5000/script_requests/get_all_requests')
			.then(response => {
				console.log(response.data);
				const requests = response.data.data;
				const rows = requests.map(request => {
					return `
						<tr>
							<td>${request.id}</td>
							<td>${request.employee_id}</td>
							<td>${request.project}</td>
							<td>${request.request_description}</td>
							<td>${request.impact}</td>
							<td>${request.urgency}</td>
                            <td>${request.created_at}</td>
                        </tr>`}).join('');
                        document.getElementById('requests-table-body').innerHTML = rows;})
            .catch(error => {
                console.log(error);});
    </script>
                    